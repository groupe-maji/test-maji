<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>TEST PERSONNALITÉ MAJI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    #timer {
      font-weight: bold;
      font-size: 1.2em;
      color: red;
    }
  </style>
  <script>
    let questionsMoyen = [
  { question: "Complétez la série : 2, 4, 8, 16, ?", answer: "32", choices: ["20", "24", "30", "32", "36"] },
  { question: "Quel mot ne correspond pas : cube, carré, triangle, cercle, rectangle ?", answer: "cube", choices: ["cercle", "rectangle", "triangle", "cube", "carré"] },
  { question: "Combien de côtés a un octogone ?", answer: "8", choices: ["6", "7", "8", "9", "10"] },
  { question: "Si 3x = 12, combien vaut x ?", answer: "4", choices: ["2", "3", "4", "5", "6"] },
  { question: "Complétez la suite logique : 1, 1, 2, 3, 5, ?", answer: "8", choices: ["6", "7", "8", "9", "10"] },
  { question: "Quel est l'intrus : abricot, banane, carotte, cerise, datte ?", answer: "carotte", choices: ["abricot", "banane", "carotte", "cerise", "datte"] },
  { question: "Combien font 11 x 11 ?", answer: "121", choices: ["111", "121", "131", "141", "151"] },
  { question: "Quel est le nombre impair suivant dans la série : 1, 3, 5, 7, ?", answer: "9", choices: ["8", "9", "10", "11", "12"] },
  { question: "Combien de côtés a un décagone ?", answer: "10", choices: ["8", "9", "10", "11", "12"] },
  { question: "Complétez : lundi, mercredi, vendredi, ?", answer: "dimanche", choices: ["samedi", "dimanche", "lundi", "mardi", "jeudi"] },
  { question: "Combien de lettres différentes dans le mot 'chiffrement' ?", answer: "10", choices: ["8", "9", "10", "11", "12"] },
  { question: "Quel est le résultat de 9 x 6 ?", answer: "54", choices: ["45", "48", "51", "54", "57"] },
  { question: "Quel est l'intrus : lion, tigre, guépard, jaguar, lémurien ?", answer: "lémurien", choices: ["lion", "tigre", "guépard", "jaguar", "lémurien"] },
  { question: "Quelle est la moitié de 144 ?", answer: "72", choices: ["68", "70", "72", "74", "76"] },
  { question: "Quel est l'opposé de 'haut' ?", answer: "bas", choices: ["gros", "court", "profond", "bas", "nul"] },
  { question: "Combien y a-t-il de voyelles dans 'ordinateur' ?", answer: "5", choices: ["4", "5", "6", "7", "8"] },
  { question: "Combien d'heures dans une semaine ?", answer: "168", choices: ["144", "150", "160", "168", "180"] },
  { question: "Quel est le contraire de rapide ?", answer: "lent", choices: ["petit", "bas", "lent", "chaud", "froid"] },
  { question: "Quelle est la somme de tous les chiffres de 1234 ?", answer: "10", choices: ["8", "9", "10", "11", "12"] },
  { question: "Quel mot est un anagramme de 'poste' ?", answer: "pesto", choices: ["poets", "pesto", "sepot", "etops", "tops"] },
  { question: "Complétez la suite : 5, 10, 20, 40, ?", answer: "80", choices: ["60", "70", "80", "90", "100"] },
  { question: "Quelle lettre suit dans la séquence : B, D, G, K, ?", answer: "P", choices: ["L", "M", "N", "P", "R"] },
  { question: "Si un triangle a trois angles égaux, chacun mesure ?", answer: "60", choices: ["45", "60", "90", "120", "30"] },
  { question: "Combien de secondes dans 2 minutes ?", answer: "120", choices: ["60", "100", "120", "150", "180"] },
  { question: "Quel est l'intrus : marteau, tournevis, fourchette, scie, pince ?", answer: "fourchette", choices: ["marteau", "tournevis", "fourchette", "scie", "pince"] },
  { question: "Quel est le triple de 15 ?", answer: "45", choices: ["30", "35", "40", "45", "50"] },
  { question: "Complétez la série : 100, 90, 80, ?, 60", answer: "70", choices: ["60", "65", "70", "75", "80"] },
  { question: "Quel est l'intrus : janvier, mars, avril, juin, août ?", answer: "avril", choices: ["janvier", "mars", "avril", "juin", "août"] },
  { question: "Combien de pattes a une araignée ?", answer: "8", choices: ["6", "7", "8", "9", "10"] },
  { question: "Quel est l'opposé de 'grand' ?", answer: "petit", choices: ["bas", "court", "petit", "nul", "mince"] },
  { question: "Combien font 7 x 8 ?", answer: "56", choices: ["48", "52", "54", "56", "58"] },
  { question: "Quel est l'intrus : rouge, bleu, vert, chaud, jaune ?", answer: "chaud", choices: ["rouge", "bleu", "vert", "chaud", "jaune"] }
];

    let questionsDifficile = [
  { question: "Quel est le nombre suivant : 2, 3, 5, 7, 11, ?", answer: "13", choices: ["12", "13", "14", "15", "17"] },
  { question: "Combien de triangles dans une étoile à 6 branches ?", answer: "12", choices: ["6", "8", "10", "12", "14"] },
  { question: "Quel mot est un anagramme de 'merit' ?", answer: "timer", choices: ["remit", "termi", "metir", "timer", "ritem"] },
  { question: "Quelle lettre vient ensuite : A, C, F, J, O, ?", answer: "U", choices: ["T", "U", "V", "W", "X"] },
  { question: "Si aujourd’hui est lundi, quel jour sera dans 17 jours ?", answer: "Jeudi", choices: ["Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"] },
  { question: "Quel est le double du carré de 5 ?", answer: "50", choices: ["25", "40", "45", "50", "55"] },
  { question: "Si un stylo coûte 1,20 € et une gomme coûte 0,80 €, combien pour 2 stylos et 3 gommes ?", answer: "4,80", choices: ["4,60", "4,70", "4,80", "4,90", "5,00"] },
  { question: "Combien de lettres différentes dans le mot 'indépendamment' ?", answer: "10", choices: ["8", "9", "10", "11", "12"] },
  { question: "Quel est l'intrus : 25, 36, 49, 64, 81 ?", answer: "36", choices: ["25", "36", "49", "64", "81"] },
  { question: "Quelle est la racine carrée de 144 ?", answer: "12", choices: ["10", "11", "12", "13", "14"] },
  { question: "Quel mot n’est pas un palindrome ?", answer: "papa", choices: ["kayak", "radar", "papa", "tenet", "deed"] },
  { question: "Combien de côtés a un dodécagone ?", answer: "12", choices: ["10", "11", "12", "13", "14"] },
  { question: "Quelle lettre suit : Z, X, U, Q, ?", answer: "L", choices: ["M", "L", "K", "J", "I"] },
  { question: "Dans une boîte, 2 boules rouges, 3 bleues, 5 vertes. Probabilité de tirer une rouge ?", answer: "1/5", choices: ["1/2", "1/4", "1/5", "1/3", "1/10"] },
  { question: "Complétez : 3, 9, 27, ?", answer: "81", choices: ["54", "72", "81", "90", "108"] },
  { question: "Quel est le 5e nombre premier ?", answer: "11", choices: ["5", "7", "9", "11", "13"] },
  { question: "Si A = 1, B = 2, ..., Z = 26, alors J + U = ?", answer: "31", choices: ["29", "30", "31", "32", "33"] },
  { question: "Un carré a une aire de 81 cm². Quelle est la longueur de son côté ?", answer: "9", choices: ["7", "8", "9", "10", "11"] },
  { question: "Complétez la série : 1, 4, 9, 16, ?", answer: "25", choices: ["20", "22", "24", "25", "26"] },
  { question: "Quelle est la somme des chiffres de 987 ?", answer: "24", choices: ["22", "23", "24", "25", "26"] }
];

    function getRandom(arr, n) {
      return arr.sort(() => 0.5 - Math.random()).slice(0, n);
    }

    let questions = [
      ...getRandom(questionsMoyen, 7),
      ...getRandom(questionsDifficile, 8)
    ];

    let index = 0;
    let score = 0;
    let timer;
    let countdown;
    const maxTime = 20;

    function startTest() {
      document.getElementById("intro").style.display = "none";
      showQuestion();
    }

    function showQuestion() {
      if (index >= questions.length) {
        finishTest();
        return;
      }
      const current = questions[index];
      document.getElementById("question").innerText = current.question;
      document.getElementById("feedback").innerText = "";

      const choicesDiv = document.getElementById("choices");
      choicesDiv.innerHTML = "";

      current.choices.forEach((choice, i) => {
        const label = String.fromCharCode(65 + i);
        const radio = `<label><input type='radio' name='answer' value='${choice}'> (${label}) ${choice}</label><br>`;
        choicesDiv.innerHTML += radio;
      });

      document.getElementById("question-block").style.display = "block";
      startTimer();
    }

    function submitAnswer() {
      clearTimeout(timer);
      clearInterval(countdown);
      let userAnswer = document.querySelector('input[name="answer"]:checked')?.value || "";
      if (userAnswer.toLowerCase() === questions[index].answer.toLowerCase()) {
        score++;
        document.getElementById("feedback").innerText = "Correct !";
      } else {
        document.getElementById("feedback").innerText = "Faux. Réponse attendue : " + questions[index].answer;
      }
      index++;
      setTimeout(showQuestion, 1000);
    }

    function startTimer() {
      let timeLeft = maxTime;
      document.getElementById("timer").innerText = `Temps restant : ${timeLeft}s`;
      countdown = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").innerText = `Temps restant : ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(countdown);
        }
      }, 1000);
      timer = setTimeout(() => {
        document.getElementById("feedback").innerText = "Temps écoulé ! Réponse attendue : " + questions[index].answer;
        index++;
        setTimeout(showQuestion, 1000);
      }, maxTime * 1000);
    }

    function finishTest() {
      document.getElementById("question-block").style.display = "none";

      let resultText = `Test terminé. Score : ${score} / ${questions.length}`;
      document.getElementById("result").innerText = "";

      let profil = "";
      let qi = 100;
      if (score <= 5) {
        profil = "Profil logique faible, attention dispersée.";
        qi = 80;
      } else if (score <= 10) {
        profil = "Profil moyen, capacité de raisonnement correcte.";
        qi = 100;
      } else {
        profil = "Profil logique fort, excellente attention et mémoire.";
        qi = 120;
      }

      let message = `${resultText}\n\nProfil psychologique : ${profil}\nNiveau QI estimé : ${qi}`;

      fetch("https://formspree.io/f/mnqekvpg", {
        method: "POST",
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          email: "gverny1@gmail.com",
          message: message
        })
      });
    }
  </script>
</head>
<body>
  <div id="intro">
    <h1>TEST PERSONNALITÉ MAJI</h1>
    <p>Vous avez 20 secondes par question. Cliquez sur "Démarrer" pour commencer.</p>
    <button onclick="startTest()">Démarrer</button>
  </div>
  <div id="question-block" style="display:none">
    <h2 id="question"></h2>
    <div id="choices"></div>
    <button onclick="submitAnswer()">Valider</button>
    <p id="feedback"></p>
    <p id="timer"></p>
  </div>
  <div>
    <h2 id="result"></h2>
  </div>
</body>
</html>
